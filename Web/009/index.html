<!DOCTYPE html>
<html>
<head>
    <title>17大美女</title>
    <meta name="language" content="zh-CN">
    <meta name="title" content="17大美女">
    <meta name="github" content="https://github.com/sun0225SUN/Awesome-Love-Code">
    <meta name="describe" content="收集不易，您的star是我坚持的动力，同时也欢迎各位PR哦! ">
    <link rel="icon" type="image/x-icon" href="https://cdn.jsdelivr.net/gh/sun0225SUN/photos/img/20210715233345.png">
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        .city {
            width: 100%;
            position: fixed;
            bottom: 0px;
            z-index: 100;
        }

        .city img {
            width: 100%;
        }

        audio {
            opacity: 0;
        }
    </style>
    <link href="modal.css" rel="stylesheet" />
</head>

<body>
    <!--烟花部分-->
    <canvas id='cas' style="background-color:rgba(0,5,24,1)">
        浏览器不支持canvas
    </canvas>
    <div class="city">
        <img src="city.png" alt="" />
    </div>
    <img src="moon.png" alt="" id="moon" style="visibility: hidden;" />
    <!--音乐部分-->
    <audio autoplay loop id="music">
        <source src="music.mp3" />
    </audio>
    <iframe id="iframMusic" allow="autoplay" style="display:none" src="blank.mp3"></iframe>
    <script src="jquery.min.js"></script>
    <script src="fire.js"></script>
    <script>
        // 简单的烟火效果
        const canvas = document.getElementById('cas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        function random(min, max) {
            return Math.random() * (max - min) + min;
        }

        function Firework(x, y, colors) {
            this.x = x;
            this.y = y;
            this.colors = colors;
            this.particles = [];

            for (let i = 0; i < 100; i++) {
                this.particles.push(new Particle(this.x, this.y, this.colors));
            }
        }

        Firework.prototype.update = function() {
            for (let i = 0; i < this.particles.length; i++) {
                this.pparticles[i].update();
            }
        }

        Firework.prototype.draw = function() {
            for (let i = 0; i < this.particles.length; i++) {
                this.particles[i].draw();
            }
        }

        function Particle(x, y, colors) {
            this.x = x;
            this.y = y;
            this.colors = colors;
            this.radius = random(1, 3);
            this.velocityX = random(-5, 5);
            this.velocityY = random(-5, 5);
            this.alpha = 1;
            this.decay = random(0.005, 0.02);
        }

        Particle.prototype.update = function() {
            this.x += this.velocityX;
            this.y += this.velocityY;
            this.alpha -= this.decay;
        }

        Particle.prototype.draw = function() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
            ctx.fillStyle = `rgba(${this.colors[0]},${this.colors[1]},${this.colors[2]},${this.alpha})`;
            ctx.fill();
        }

        const fireworks = [];

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            fireworks.forEach(firework => {
                firework.update();
                firework.draw();
            });
            requestAnimationFrame(animate);
        }

        canvas.addEventListener('click', (e) => {
            const colors = [Math.floor(random(0, 255)), Math.floor(random(0, 255)), Math.floor(random(0, 255))];
            fireworks.push(new Firework(e.clientX, e.clientY, colors));
        });

        animate();
    </script>
</body>
</html>
